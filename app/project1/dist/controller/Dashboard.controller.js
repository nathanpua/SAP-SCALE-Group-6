sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/Sorter"],function(e,t,i,r,a,n){"use strict";return e.extend("project1.controller.Dashboard",{onInit:function(){console.log("Dashboard controller initialized - Aircraft Maintenance Dashboard");this._initializeModels();this._initializeMetrics();this._initializeTNPData();this._initializeMTBFTrends()},_initializeModels:function(){console.log("Initializing comprehensive aircraft data models");var e=[{tailNumber:"N456AB",model:"Boeing 737-800",flightHoursSinceLastMaintenance:125,engineTemperature:485,vibrationLevel:1.8,hydraulicPressure:3e3,brakeWearPercent:25,oilParticleCount:850,weatherStressIndex:7.2,aircraftAgeYears:8,flightCycles:8920,mtbf:450,lastFailureDate:"2023-11-15",lastFailureType:"Hydraulic",failureHistory:[{date:"2023-11-15",type:"Hydraulic",severity:"minor"},{date:"2023-08-22",type:"Engine",severity:"major"},{date:"2023-05-10",type:"Landing Gear",severity:"minor"}],overallStatus:"normal",riskScore:25.5,nextMaintenanceEstimate:"2025-06-15",alertStatus:"Normal",maintenanceStatus:"Scheduled"},{tailNumber:"N789CD",model:"Airbus A320",flightHoursSinceLastMaintenance:890,engineTemperature:512,vibrationLevel:2.4,hydraulicPressure:2850,brakeWearPercent:67,oilParticleCount:1250,weatherStressIndex:8.9,aircraftAgeYears:5,flightCycles:6420,mtbf:320,lastFailureDate:"2024-01-08",lastFailureType:"Engine",failureHistory:[{date:"2024-01-08",type:"Engine",severity:"critical"},{date:"2023-10-14",type:"Avionics",severity:"major"},{date:"2023-07-03",type:"Hydraulic",severity:"minor"}],overallStatus:"critical",riskScore:78.3,nextMaintenanceEstimate:"2025-03-12",alertStatus:"Critical",maintenanceStatus:"Overdue"},{tailNumber:"N123EF",model:"Boeing 777-300",flightHoursSinceLastMaintenance:210,engineTemperature:498,vibrationLevel:1.2,hydraulicPressure:3200,brakeWearPercent:12,oilParticleCount:650,weatherStressIndex:5.1,aircraftAgeYears:12,flightCycles:11250,mtbf:680,lastFailureDate:"2023-09-20",lastFailureType:"Landing Gear",failureHistory:[{date:"2023-09-20",type:"Landing Gear",severity:"minor"},{date:"2023-04-15",type:"Hydraulic",severity:"minor"}],overallStatus:"normal",riskScore:18.9,nextMaintenanceEstimate:"2025-12-10",alertStatus:"Normal",maintenanceStatus:"Scheduled"},{tailNumber:"N654GH",model:"Airbus A330",flightHoursSinceLastMaintenance:450,engineTemperature:545,vibrationLevel:1.9,hydraulicPressure:2650,brakeWearPercent:88,oilParticleCount:1450,weatherStressIndex:9.7,aircraftAgeYears:15,flightCycles:16890,mtbf:180,lastFailureDate:"2024-02-01",lastFailureType:"Brake System",failureHistory:[{date:"2024-02-01",type:"Brake System",severity:"critical"},{date:"2023-12-18",type:"Engine",severity:"major"},{date:"2023-09-05",type:"Hydraulic",severity:"major"},{date:"2023-06-12",type:"Avionics",severity:"minor"}],overallStatus:"critical",riskScore:89.1,nextMaintenanceEstimate:"2025-02-15",alertStatus:"Critical",maintenanceStatus:"Overdue"},{tailNumber:"N987IJ",model:"Boeing 787-9",flightHoursSinceLastMaintenance:95,engineTemperature:475,vibrationLevel:1.1,hydraulicPressure:3100,brakeWearPercent:18,oilParticleCount:420,weatherStressIndex:4.3,aircraftAgeYears:3,flightCycles:4230,mtbf:720,lastFailureDate:null,lastFailureType:null,failureHistory:[],overallStatus:"normal",riskScore:12.4,nextMaintenanceEstimate:"2025-11-20",alertStatus:"Normal",maintenanceStatus:"Scheduled"},{tailNumber:"N321KL",model:"Airbus A321",flightHoursSinceLastMaintenance:820,engineTemperature:501,vibrationLevel:2.1,hydraulicPressure:2950,brakeWearPercent:45,oilParticleCount:980,weatherStressIndex:6.8,aircraftAgeYears:7,flightCycles:7650,mtbf:380,lastFailureDate:"2023-12-03",lastFailureType:"Avionics",failureHistory:[{date:"2023-12-03",type:"Avionics",severity:"major"},{date:"2023-08-15",type:"Engine",severity:"minor"}],overallStatus:"warning",riskScore:45.2,nextMaintenanceEstimate:"2025-07-18",alertStatus:"Warning",maintenanceStatus:"Scheduled"}];var i=e.map(this._calculateTNP.bind(this));var r=this._calculateFleetSummary(e);var a=this._calculateRiskDistribution(e);var n=new t({Aircraft:e,TNPData:i,FleetSummary:r,RiskDistribution:a,Models:this._getUniqueModels(e),AlertStatuses:this._getUniqueStatuses(e),SortOptions:this._getSortOptions(),CurrentFilter:{model:"All",sortField:"tailNumber",sortOrder:"asc"}});this.getView().setModel(n);console.log("Comprehensive dashboard data loaded:",{aircraftCount:e.length,fleetSummary:r,riskDistribution:a})},_initializeMetrics:function(){console.log("Initializing metrics data");var e={Metrics:[{title:"Aircraft in Service",subtitle:"Active fleet count",value:"247",change:"+5",trend:"up",status:"success",icon:"sap-icon://flight"},{title:"Scheduled Maintenance",subtitle:"Upcoming maintenance",value:"18",change:"+3",trend:"up",status:"neutral",icon:"sap-icon://calendar"},{title:"Compliance Rate",subtitle:"Regulatory compliance",value:"98.2%",change:"+1.5%",trend:"up",status:"success",icon:"sap-icon://accept"},{title:"Avg. Turnaround Time",subtitle:"Maintenance efficiency",value:"4.2 hrs",change:"-0.8",trend:"down",status:"success",icon:"sap-icon://clock"}]};this.getView().setModel(new t(e),"metrics")},_initializeTNPData:function(){console.log("Initializing TNP data")},_initializeMTBFTrends:function(){console.log("Initializing MTBF trends");var e=[{month:"Aug",boeing737:420,airbusA320:380,boeing777:650,airbusA330:200,boeing787:750,airbusA321:360},{month:"Sep",boeing737:435,airbusA320:365,boeing777:665,airbusA330:190,boeing787:740,airbusA321:370},{month:"Oct",boeing737:445,airbusA320:350,boeing777:670,airbusA330:185,boeing787:730,airbusA321:375},{month:"Nov",boeing737:440,airbusA320:340,boeing777:675,airbusA330:175,boeing787:720,airbusA321:380},{month:"Dec",boeing737:450,airbusA320:320,boeing777:680,airbusA330:180,boeing787:720,airbusA321:380},{month:"Jan",boeing737:450,airbusA320:320,boeing777:680,airbusA330:180,boeing787:720,airbusA321:380}];this.getView().setModel(new t(e),"mtbfTrends")},_calculatePredictiveFlags:function(e){var t=[];if(e.vibrationLevel>2&&e.flightHoursSinceLastMaintenance>800){t.push({type:"critical",message:"High failure probability (75%) - Vibration + Flight Hours",priority:"immediate"})}if(e.oilParticleCount>1e3){t.push({type:"warning",message:"Maintenance alert - Oil contamination detected",priority:"high"})}if(e.brakeWearPercent>85){t.push({type:"critical",message:"Critical brake wear - Immediate replacement required",priority:"immediate"})}if(e.vibrationLevel>2){t.push({type:"warning",message:"Elevated vibration levels detected",priority:"medium"})}if(e.engineTemperature>520){t.push({type:"warning",message:"Engine temperature above normal range",priority:"high"})}return t},_calculateOverallStatus:function(e){var t=this._calculatePredictiveFlags(e);var i=t.filter(function(e){return e.type==="critical"});var r=t.filter(function(e){return e.type==="warning"});if(i.length>0)return"critical";if(r.length>0)return"warning";return"normal"},_calculateTNP:function(e){var t=Math.max(0,(e.mtbf-e.flightHoursSinceLastMaintenance)/12);var i=1;if(e.vibrationLevel>2)i*=.7;if(e.vibrationLevel>2.5)i*=.5;if(e.brakeWearPercent>70)i*=.8;if(e.brakeWearPercent>85)i*=.3;if(e.oilParticleCount>1e3)i*=.6;if(e.engineTemperature>520)i*=.7;if(e.weatherStressIndex>8)i*=.8;if(e.aircraftAgeYears>10)i*=.9;var r=Math.floor(t*i);var a=r<=7;var n=0;if(e.vibrationLevel>2&&e.flightHoursSinceLastMaintenance>800)n+=75;if(e.brakeWearPercent>85)n+=60;if(e.oilParticleCount>1e3)n+=40;if(e.engineTemperature>520)n+=30;n=Math.min(95,n);return{tailNumber:e.tailNumber,model:e.model,daysUntilMaintenance:r,isUrgent:a,predictedFailureRisk:n}},_calculateFleetSummary:function(e){var t=e.length;var i=e.filter(function(e){return e.overallStatus==="critical"}).length;var r=e.filter(function(e){return e.overallStatus==="warning"}).length;var a=e.filter(function(e){return e.overallStatus==="normal"}).length;var n=e.reduce(function(e,t){return e+t.riskScore},0)/t;var l=e.reduce(function(e,t){return e+t.mtbf},0)/t;return{totalAircraft:t,criticalAircraft:i,warningAircraft:r,normalAircraft:a,avgRiskScore:Math.round(n*10)/10,avgMTBF:Math.round(l),complianceRate:Math.round((a+r)/t*1e3)/10}},_calculateRiskDistribution:function(e){var t=e.filter(function(e){return e.riskScore<=30}).length;var i=e.filter(function(e){return e.riskScore>30&&e.riskScore<=60}).length;var r=e.filter(function(e){return e.riskScore>60}).length;return{low:t,medium:i,high:r}},_getUniqueModels:function(e){var t=e.map(function(e){return e.model});var i=[...new Set(t)].sort();return i.map(function(e){return{model:e}})},_getUniqueStatuses:function(e){var t=e.map(function(e){return e.alertStatus});var i=[...new Set(t)].sort();return i.map(function(e){return{status:e}})},_getSortOptions:function(){return[{value:"tailNumber",label:"Tail Number"},{value:"model",label:"Aircraft Model"},{value:"flightHoursSinceLastMaintenance",label:"Flight Hours"},{value:"engineTemperature",label:"Engine Temperature"},{value:"vibrationLevel",label:"Vibration Level"},{value:"brakeWearPercent",label:"Brake Wear"},{value:"oilParticleCount",label:"Oil Particles"},{value:"mtbf",label:"MTBF"},{value:"aircraftAgeYears",label:"Aircraft Age"},{value:"riskScore",label:"Risk Score"}]},formatOverallStatusState:function(e){switch(e){case"normal":return"Success";case"warning":return"Warning";case"critical":return"Error";default:return"None"}},formatRiskState:function(e){if(e>60)return"Error";if(e>30)return"Warning";return"Success"},formatTempState:function(e){if(e>520)return"Error";if(e>500)return"Warning";return"Success"},formatVibrationState:function(e){if(e>2)return"Error";if(e>1.5)return"Warning";return"Success"},formatMaintenanceState:function(e){switch(e){case"Scheduled":return"Success";case"Overdue":return"Error";case"Completed":return"Success";default:return"None"}},onAircraftSelect:function(e){var t=e.getSource().getText();i.show("Selected aircraft: "+t)},onViewAllAircraft:function(){i.show("Viewing all aircraft")},onApplyFilters:function(){var e=this.byId("modelFilter").getSelectedKey();var t=this.byId("alertFilter").getSelectedKey();var r=this.byId("riskFilter").getSelectedKey();var a=this.byId("sortSelect").getSelectedKey();i.show("Filters applied: "+e+", "+t+", "+r+", Sort: "+a);this._applyTableFilters()},onResetFilters:function(){this.byId("modelFilter").setSelectedKey("");this.byId("alertFilter").setSelectedKey("");this.byId("riskFilter").setSelectedKey("All");this.byId("sortSelect").setSelectedKey("tailNumber");i.show("Filters reset");this._resetTableFilters()},_applyTableFilters:function(){var e=this.byId("aircraftTable");var t=e.getBinding("rows");if(t){var i=[];var n=this.byId("modelFilter").getSelectedKey();var l=this.byId("alertFilter").getSelectedKey();var s=this.byId("riskFilter").getSelectedKey();if(n&&n!==""){i.push(new r("model",a.EQ,n))}if(l&&l!==""){i.push(new r("alertStatus",a.EQ,l))}if(s&&s!=="All"){var o=0,c=100;switch(s){case"Low":c=30;break;case"Medium":o=31;c=60;break;case"High":o=61;break}i.push(new r("riskScore",a.BT,o,c))}t.filter(i)}},_resetTableFilters:function(){var e=this.byId("aircraftTable");var t=e.getBinding("rows");if(t){t.filter([])}},onNavigateToAnalytics:function(){i.show("Navigating to Fleet Analytics")},onNavigateToCompliance:function(){i.show("Navigating to Safety Compliance")},onNavigateToImport:function(){i.show("Navigating to Import Data")}})});
//# sourceMappingURL=Dashboard.controller.js.map