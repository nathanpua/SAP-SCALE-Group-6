<mvc:View
    controllerName="project1.controller.Dashboard"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns="sap.m"
    xmlns:table="sap.ui.table"
    xmlns:layout="sap.ui.layout"
    xmlns:ui="sap.ui"
    xmlns:grid="sap.ui.layout.cssgrid"
    xmlns:form="sap.ui.layout.form"
    xmlns:micro="sap.suite.ui.microchart"

    class="sapUiSizeCompact">
    
    <Page id="dashboardPage" 
          title="Skylink Atlas"
          class="sapUiResponsiveContentPadding project1-dashboard"
          backgroundDesign="Transparent"
          showHeader="true"
          enableScrolling="true">
            
        <customHeader>
            <Toolbar class="dashboard-navbar">
                <Title text="Skylink Atlas" level="H2" class="navbar-title"/>
                <ToolbarSpacer/>
                <HBox alignItems="Center" class="navbar-actions">
                    <Button icon="sap-icon://bell" 
                            type="Transparent" 
                            tooltip="Notifications"
                            press="onNotifications"
                            class="navbar-action-btn"/>
                    <Button icon="sap-icon://settings" 
                            type="Transparent" 
                            tooltip="Settings"
                            press="onSettings"
                            class="navbar-action-btn"/>
                    <Button icon="sap-icon://person-placeholder" 
                            type="Transparent" 
                            tooltip="User Profile"
                            press="onUserProfile"
                            class="navbar-action-btn"/>
                </HBox>
            </Toolbar>
        </customHeader>
            
        <content>
            <!-- Integrated Navigation Tabs -->
            <IconTabBar id="mainNavigation"
                        class="dashboard-navigation"
                        selectedKey="{view>/selectedTab}"
                        select="onNavigationTabSelect"
                        headerBackgroundDesign="Transparent"
                        expandable="false"
                        stretchContentHeight="true">
                
                <items>
                    <!-- Flight Operations Tab -->
                    <IconTabFilter id="flightOpsTab"
                                   key="flightOperations"
                                   text="Flight Operations"
                                   icon="sap-icon://flight">
                        <content>
                            <VBox class="tab-content-container">
                                <Title text="Flight Operations Dashboard" level="H2" class="sapUiMediumMarginBottom"/>
                                
                                <!-- Flight Operations specific content -->
                                <Panel headerText="Flight Status Overview" 
                                       class="sapUiResponsiveMargin flight-ops-panel"
                                       backgroundDesign="Transparent"
                                       width="100%"
                                       expandable="false">
                                    <content>
                                        <grid:CSSGrid class="flight-ops-grid"
                                                      width="100%">
                                            <Panel class="flight-metric-card">
                                                <content>
                                                    <VBox alignItems="Center" class="flight-metric-content">
                                                        <core:Icon src="sap-icon://flight" class="flight-metric-icon active"/>
                                                        <Title text="Active Flights" level="H3" class="sapUiTinyMarginTop"/>
                                                        <Title text="42" level="H1" class="metric-value success"/>
                                                        <Text text="Currently in air" class="metric-subtitle"/>
                                                    </VBox>
                                                </content>
                                            </Panel>
                                            
                                            <Panel class="flight-metric-card">
                                                <content>
                                                    <VBox alignItems="Center" class="flight-metric-content">
                                                        <core:Icon src="sap-icon://calendar" class="flight-metric-icon scheduled"/>
                                                        <Title text="Scheduled Today" level="H3" class="sapUiTinyMarginTop"/>
                                                        <Title text="156" level="H1" class="metric-value"/>
                                                        <Text text="Total flights planned" class="metric-subtitle"/>
                                                    </VBox>
                                                </content>
                                            </Panel>
                                            
                                            <Panel class="flight-metric-card">
                                                <content>
                                                    <VBox alignItems="Center" class="flight-metric-content">
                                                        <core:Icon src="sap-icon://warning" class="flight-metric-icon warning"/>
                                                        <Title text="Delayed" level="H3" class="sapUiTinyMarginTop"/>
                                                        <Title text="8" level="H1" class="metric-value warning"/>
                                                        <Text text="Weather/maintenance" class="metric-subtitle"/>
                                                    </VBox>
                                                </content>
                                            </Panel>
                                            
                                            <Panel class="flight-metric-card">
                                                <content>
                                                    <VBox alignItems="Center" class="flight-metric-content">
                                                        <core:Icon src="sap-icon://accept" class="flight-metric-icon success"/>
                                                        <Title text="On-Time Rate" level="H3" class="sapUiTinyMarginTop"/>
                                                        <Title text="94.8%" level="H1" class="metric-value success"/>
                                                        <Text text="Last 7 days" class="metric-subtitle"/>
                                                    </VBox>
                                                </content>
                                            </Panel>
                                        </grid:CSSGrid>
                                    </content>
                                </Panel>
                                
                                <!-- Flight Operations Quick Actions -->
                                <Panel headerText="Quick Actions" 
                                       class="sapUiResponsiveMargin quick-actions-panel"
                                       backgroundDesign="Transparent">
                                    <content>
                                        <HBox class="quick-actions-container">
                                            <Button text="Schedule Flight" 
                                                    icon="sap-icon://add" 
                                                    type="Emphasized"
                                                    press="onScheduleFlight"
                                                    class="sapUiTinyMarginEnd"/>
                                            <Button text="Flight Status" 
                                                    icon="sap-icon://radar-chart" 
                                                    type="Default"
                                                    press="onFlightStatus"
                                                    class="sapUiTinyMarginEnd"/>
                                            <Button text="Weather Report" 
                                                    icon="sap-icon://cloud" 
                                                    type="Default"
                                                    press="onWeatherReport"
                                                    class="sapUiTinyMarginEnd"/>
                                            <Button text="Crew Management" 
                                                    icon="sap-icon://group" 
                                                    type="Default"
                                                    press="onCrewManagement"/>
                                        </HBox>
                                    </content>
                                </Panel>
                            </VBox>
                        </content>
                    </IconTabFilter>
                    
                    <!-- Fleet Management Tab -->
                    <IconTabFilter id="fleetTab"
                                   key="fleet"
                                   text="Fleet Management"
                                   icon="sap-icon://product">
                        <content>
                            <VBox class="tab-content-container">
                                <!-- Original dashboard content moved here -->
                                <layout:Grid defaultSpan="XL12 L12 M12 S12" class="dashboard-content-grid">
                                    
                                    <!-- Modern Metrics Cards Grid -->
                                    <Panel headerText="Fleet Overview" 
                                           class="sapUiResponsiveMargin metrics-panel"
                                           backgroundDesign="Transparent"
                                           width="100%"
                                           expandable="false">
                                        <content>
                                            <grid:CSSGrid class="fleet-overview-grid"
                                                          width="100%"
                                                          gridTemplateColumns="1fr 1fr 1fr"
                                                          gridGap="1rem">
                                                
                                                <!-- Total Aircraft Count -->
                                                <Panel class="metric-card" width="100%">
                                                    <headerToolbar>
                                                        <Toolbar class="metric-card-header">
                                                            <core:Icon src="sap-icon://flight" class="sapUiTinyMarginEnd"/>
                                                            <Title text="Total Aircraft" level="H3" class="sapUiTinyMarginEnd"/>
                                                            <ToolbarSpacer/>
                                                            <Text text="Active fleet size" class="sapUiTinyMarginEnd"/>
                                                        </Toolbar>
                                                    </headerToolbar>
                                                    <content>
                                                        <VBox alignItems="Center" class="sapUiMediumMargin metric-content">
                                                            <Title text="647" 
                                                                   level="H1" 
                                                                   class="metric-value success large-metric"/>
                                                            <HBox alignItems="Center" class="sapUiTinyMarginTop">
                                                                <core:Icon src="sap-icon://trend-up" 
                                                                          class="sapUiTinyMarginEnd trend-up"
                                                                          color="#28a745"/>
                                                                <Text text="+2 this month" class="trend-text"/>
                                                            </HBox>
                                                        </VBox>
                                                    </content>
                                                </Panel>
                                                
                                                <!-- Aircrafts Requiring Attention -->
                                                <Panel class="metric-card" width="100%">
                                                    <headerToolbar>
                                                        <Toolbar class="metric-card-header">
                                                            <core:Icon src="sap-icon://alert" class="sapUiTinyMarginEnd"/>
                                                            <Title text="Requiring Attention" level="H3" class="sapUiTinyMarginEnd"/>
                                                            <ToolbarSpacer/>
                                                            <Text text="Maintenance alerts" class="sapUiTinyMarginEnd"/>
                                                        </Toolbar>
                                                    </headerToolbar>
                                                    <content>
                                                        <VBox alignItems="Center" class="sapUiMediumMargin metric-content">
                                                            <Title text="18" 
                                                                   level="H1" 
                                                                   class="metric-value warning large-metric"/>
                                                            <HBox alignItems="Center" class="sapUiTinyMarginTop">
                                                                <core:Icon src="sap-icon://trend-down" 
                                                                          class="sapUiTinyMarginEnd trend-down"
                                                                          color="#dc3545"/>
                                                                <Text text="+3 from last week" class="trend-text"/>
                                                            </HBox>
                                                        </VBox>
                                                    </content>
                                                </Panel>
                                                
                                                <!-- Average Risk Score -->
                                                <Panel class="metric-card" width="100%">
                                                    <headerToolbar>
                                                        <Toolbar class="metric-card-header">
                                                            <core:Icon src="sap-icon://shield" class="sapUiTinyMarginEnd"/>
                                                            <Title text="Average Risk Score" level="H3" class="sapUiTinyMarginEnd"/>
                                                            <ToolbarSpacer/>
                                                            <Text text="Fleet safety index" class="sapUiTinyMarginEnd"/>
                                                        </Toolbar>
                                                    </headerToolbar>
                                                    <content>
                                                        <VBox alignItems="Center" class="sapUiMediumMargin metric-content">
                                                            <Title text="34.2" 
                                                                   level="H1" 
                                                                   class="metric-value success large-metric"/>
                                                            <HBox alignItems="Center" class="sapUiTinyMarginTop">
                                                                <core:Icon src="sap-icon://trend-up" 
                                                                          class="sapUiTinyMarginEnd trend-up"
                                                                          color="#28a745"/>
                                                                <Text text="-2.1 from last month" class="trend-text"/>
                                                            </HBox>
                                                        </VBox>
                                                    </content>
                                                </Panel>
                                                
                                            </grid:CSSGrid>
                                        </content>
                                    </Panel>

                                    <!-- Advanced Filters Panel -->
                                    <Panel headerText="Data Filters &amp; Controls" 
                                           class="sapUiResponsiveMargin filters-panel"
                                           expandable="true" 
                                           expanded="true"
                                           backgroundDesign="Transparent"
                                           width="100%">
                                        <content>
                                            <form:SimpleForm editable="true" 
                                                             layout="ResponsiveGridLayout" 
                                                             labelSpanXL="3" 
                                                             labelSpanL="3" 
                                                             labelSpanM="4" 
                                                             labelSpanS="12"
                                                             class="filters-form"
                                                             width="100%">
                                                <form:content>
                                                    <!-- Model Filter -->
                                                    <Label text="Aircraft Model:" class="filter-label"/>
                                                    <ComboBox id="modelFilter" 
                                                             items="{/Models}" 
                                                             width="100%"
                                                             class="filter-control"
                                                             placeholder="Select Aircraft Model">
                                                        <core:Item key="{model}" text="{model}"/>
                                                    </ComboBox>
                                                    
                                                    <!-- Alert Status Filter -->
                                                    <Label text="Alert Status:" class="filter-label"/>
                                                    <ComboBox id="alertFilter" 
                                                             items="{/AlertStatuses}" 
                                                             width="100%"
                                                             class="filter-control"
                                                             placeholder="Select Alert Status">
                                                        <core:Item key="{status}" text="{status}"/>
                                                    </ComboBox>
                                                    
                                                    <!-- Risk Level Filter -->
                                                    <Label text="Risk Level:" class="filter-label"/>
                                                    <ComboBox id="riskFilter" 
                                                             width="100%"
                                                             class="filter-control"
                                                             placeholder="Select Risk Level"
                                                             selectedKey="All">
                                                        <items>
                                                            <core:Item key="All" text="All"/>
                                                            <core:Item key="Low" text="Low (0-30)"/>
                                                            <core:Item key="Medium" text="Medium (31-60)"/>
                                                            <core:Item key="High" text="High (61-100)"/>
                                                        </items>
                                                    </ComboBox>
                                                    
                                                    <!-- Sort Options -->
                                                    <Label text="Sort By:" class="filter-label"/>
                                                    <ComboBox id="sortSelect" 
                                                             items="{/SortOptions}" 
                                                             width="100%"
                                                             class="filter-control"
                                                             placeholder="Select Sort Order">
                                                        <core:Item key="{value}" text="{label}"/>
                                                    </ComboBox>
                                                    
                                                    <!-- Filter Actions -->
                                                    <Label text="Actions:" class="filter-label"/>
                                                    <HBox class="filter-actions">
                                                        <Button text="Apply" 
                                                                press="onApplyFilters" 
                                                                type="Emphasized" 
                                                                class="sapUiTinyMarginEnd"/>
                                                        <Button text="Reset" 
                                                                press="onResetFilters"
                                                                type="Transparent"/>
                                                    </HBox>
                                                </form:content>
                                            </form:SimpleForm>
                                        </content>
                                    </Panel>

                                    <!-- Fleet Status Overview Panel -->
                                    <Panel headerText="Fleet Status Overview"
                                           class="sapUiResponsiveMargin fleet-status-panel"
                                           backgroundDesign="Transparent">
                                        <headerToolbar>
                                            <Toolbar class="fleet-status-header">
                                                <core:Icon src="sap-icon://flight" class="sapUiTinyMarginEnd"/>
                                                <Title text="Fleet Status Overview" level="H2" class="sapUiTinyMarginEnd"/>
                                                <ToolbarSpacer/>
                                                <Text text="Real-time aircraft monitoring and predictive alerts"/>
                                            </Toolbar>
                                        </headerToolbar>
                                        <content>
                                            <VBox class="sapUiMediumMargin">
                                                <!-- Status Summary -->
                                                <HBox justifyContent="SpaceBetween" alignItems="Center" class="sapUiMediumMarginBottom">
                                                    <Text text="Showing {/Aircraft/length} aircraft in fleet" class="status-summary"/>
                                                    <HBox alignItems="Center" class="sapUiTinyMarginEnd">
                                                        <Button text="Refresh" 
                                                                icon="sap-icon://refresh" 
                                                                type="Transparent"
                                                                tooltip="Refresh fleet data"
                                                                class="sapUiTinyMarginEnd"/>
                                                        <Button text="View All" 
                                                                icon="sap-icon://arrow-right" 
                                                                type="Emphasized"
                                                                press="onViewAllAircraft"/>
                                                    </HBox>
                                                </HBox>
                                                
                                                <!-- Aircraft Status Scrollable List -->
                                                <List id="aircraftStatusList"
                                                      items="{/Aircraft}"
                                                      growing="true"
                                                      growingScrollToLoad="true"
                                                      growingThreshold="5"
                                                      growingTriggerText="Load More Aircraft"
                                                      noDataText="No aircraft data available"
                                                      class="aircraft-status-list"
                                                      width="100%">
                                                    <CustomListItem type="Active" 
                                                                   press="onAircraftRowPress"
                                                                   class="aircraft-status-row">
                                                        <!-- Main Aircraft Row Content -->
                                                        <HBox justifyContent="SpaceBetween" 
                                                              alignItems="Center" 
                                                              class="aircraft-row-content"
                                                              width="100%">
                                                            
                                                            <!-- Left Section: Aircraft Identity & Status -->
                                                            <HBox alignItems="Center" class="aircraft-identity-section">
                                                                <core:Icon src="sap-icon://flight" 
                                                                          class="sapUiTinyMarginEnd aircraft-row-icon"/>
                                                                <VBox class="aircraft-identity">
                                                                    <HBox alignItems="Center" class="sapUiTinyMarginBottom">
                                                                        <Title text="{tailNumber}" level="H4" class="aircraft-tail-number"/>
                                                                        <ObjectStatus text="{overallStatus}" 
                                                                                    state="{path: 'overallStatus', formatter: '.formatOverallStatusState'}"
                                                                                    class="sapUiTinyMarginBegin aircraft-overall-status"/>
                                                                    </HBox>
                                                                    <Text text="{model}" class="aircraft-model-name"/>
                                                                    <HBox alignItems="Center" class="aircraft-basic-info">
                                                                        <Text text="Age: {aircraftAgeYears}y" class="sapUiTinyMarginEnd"/>
                                                                        <Text text="Cycles: {flightCycles}" class="sapUiTinyMarginEnd"/>
                                                                        <ObjectNumber number="{riskScore}" 
                                                                                    unit="Risk Score"
                                                                                    state="{path: 'riskScore', formatter: '.formatRiskState'}"
                                                                                    class="risk-score-compact"/>
                                                                    </HBox>
                                                                </VBox>
                                                            </HBox>
                                                            
                                                            <!-- Center Section: Key Operational Metrics -->
                                                            <HBox class="operational-metrics-row" alignItems="Center">
                                                                <!-- Flight Hours -->
                                                                <VBox class="metric-column">
                                                                    <Label text="Flight Hrs" class="metric-label-compact"/>
                                                                    <ObjectNumber number="{flightHoursSinceLastMaintenance}" 
                                                                                class="metric-value-compact"/>
                                                                </VBox>
                                                                
                                                                <!-- Engine Temperature -->
                                                                <VBox class="metric-column">
                                                                    <Label text="Engine Temp" class="metric-label-compact"/>
                                                                    <ObjectNumber number="{engineTemperature}" 
                                                                                unit="°C"
                                                                                state="{path: 'engineTemperature', formatter: '.formatTempState'}"
                                                                                class="metric-value-compact"/>
                                                                </VBox>
                                                                
                                                                <!-- Vibration Level -->
                                                                <VBox class="metric-column">
                                                                    <Label text="Vibration Level" class="metric-label-compact"/>
                                                                    <ObjectNumber number="{vibrationLevel}" 
                                                                                unit="g"
                                                                                state="{path: 'vibrationLevel', formatter: '.formatVibrationState'}"
                                                                                class="metric-value-compact"/>
                                                                </VBox>
                                                                
                                                                <!-- Brake Wear -->
                                                                <VBox class="metric-column">
                                                                    <Label text="Brake Wear" class="metric-label-compact"/>
                                                                    <ObjectNumber number="{brakeWearPercent}" 
                                                                                unit="%"
                                                                                state="{= ${brakeWearPercent} > 85 ? 'Error' : ${brakeWearPercent} > 70 ? 'Warning' : 'Success'}"
                                                                                class="metric-value-compact"/>
                                                                </VBox>
                                                            </HBox>
                                                            
                                                            <!-- Right Section: Additional Stats & Actions -->
                                                            <HBox class="additional-stats-section" alignItems="Center">
                                                                <!-- MTBF -->
                                                                <VBox class="metric-column">
                                                                    <Label text="MTBF" class="metric-label-compact"/>
                                                                    <ObjectNumber number="{mtbf}" 
                                                                                unit="hrs"
                                                                                class="metric-value-compact"/>
                                                                </VBox>
                                                                
                                                                <!-- Predictive Alerts Indicator -->
                                                                <VBox class="alert-indicator-column">
                                                                    <Label text="Alerts" class="metric-label-compact"/>
                                                                    <HBox alignItems="Center" class="alert-indicator">
                                                                        <core:Icon src="{= ${predictiveFlags}.length > 0 ? 'sap-icon://alert' : 'sap-icon://accept'}" 
                                                                                  color="{= ${predictiveFlags}.length > 0 ? '#f44336' : '#4caf50'}"
                                                                                  class="sapUiTinyMarginEnd"/>
                                                                        <Text text="{= ${predictiveFlags}.length > 0 ? ${predictiveFlags}.length : '0'}" 
                                                                              class="alert-count"/>
                                                                    </HBox>
                                                                </VBox>
                                                                
                                                                <!-- Action Buttons -->
                                                                <VBox class="action-buttons-column">
                                                                    <Button icon="sap-icon://detail-view" 
                                                                           type="Transparent"
                                                                           tooltip="View Details"
                                                                           press="onAircraftDetailPress"
                                                                           class="action-btn-compact"/>
                                                                    <Button icon="sap-icon://wrench" 
                                                                           type="Transparent"
                                                                           tooltip="Schedule Maintenance"
                                                                           press="onScheduleMaintenancePress"
                                                                           class="action-btn-compact"/>
                                                                </VBox>
                                                            </HBox>
                                                        </HBox>
                                                        
                                                        <!-- Expandable Details Section (Initially Hidden) -->
                                                        <VBox class="aircraft-details-expanded" 
                                                              visible="false">
                                                            <HBox justifyContent="SpaceBetween" class="expanded-content">
                                                                <!-- Failure History -->
                                                                <VBox class="failure-history-section">
                                                                    <Title text="Failure History" level="H6" class="section-title"/>
                                                                    <VBox visible="{= ${lastFailureDate} !== null}">
                                                                        <Text text="Last: {lastFailureDate} - {lastFailureType}" class="last-failure-text"/>
                                                                        <HBox wrap="Wrap" class="failure-badges-row">
                                                                            <List items="{failureHistory}" 
                                                                                  showNoData="false"
                                                                                  class="failure-badges-list">
                                                                                <CustomListItem class="failure-badge-item">
                                                                                    <ObjectStatus text="{type}" 
                                                                                                state="{= ${severity} === 'critical' ? 'Error' : ${severity} === 'major' ? 'Warning' : 'Success'}"
                                                                                                class="failure-badge-compact"/>
                                                                                </CustomListItem>
                                                                            </List>
                                                                        </HBox>
                                                                    </VBox>
                                                                    <Text text="No recorded failures" 
                                                                          visible="{= ${lastFailureDate} === null}"
                                                                          class="no-failures-text"/>
                                                                </VBox>
                                                                
                                                                <!-- Predictive Alerts -->
                                                                <VBox class="alerts-section" visible="{= ${predictiveFlags}.length > 0}">
                                                                    <Title text="Active Alerts" level="H6" class="section-title"/>
                                                                    <List items="{predictiveFlags}" 
                                                                          showNoData="false"
                                                                          class="alerts-detail-list">
                                                                        <StandardListItem title="{message}"
                                                                                        icon="{= ${type} === 'critical' ? 'sap-icon://alert' : 'sap-icon://warning'}"
                                                                                        iconInset="false"
                                                                                        class="alert-detail-item {type}"/>
                                                                    </List>
                                                                </VBox>
                                                                
                                                                <!-- Maintenance Schedule -->
                                                                <VBox class="maintenance-section">
                                                                    <Title text="Maintenance" level="H6" class="section-title"/>
                                                                    <VBox class="maintenance-info">
                                                                        <HBox justifyContent="SpaceBetween">
                                                                            <Text text="Status:" class="info-label"/>
                                                                            <ObjectStatus text="{maintenanceStatus}" 
                                                                                        state="{path: 'maintenanceStatus', formatter: '.formatMaintenanceState'}"
                                                                                        class="maintenance-status-compact"/>
                                                                        </HBox>
                                                                        <HBox justifyContent="SpaceBetween">
                                                                            <Text text="Next Scheduled:" class="info-label"/>
                                                                            <Text text="{nextMaintenanceEstimate}" class="info-value"/>
                                                                        </HBox>
                                                                    </VBox>
                                                                </VBox>
                                                            </HBox>
                                                        </VBox>
                                                    </CustomListItem>
                                                </List>
                                            </VBox>
                                        </content>
                                    </Panel>
                                </layout:Grid>
                            </VBox>
                        </content>
                    </IconTabFilter>
                    
                    <!-- Maintenance Tab -->
                    <IconTabFilter id="maintenanceTab"
                                   key="maintenance"
                                   text="Maintenance"
                                   icon="sap-icon://wrench">
                        <content>
                            <VBox class="tab-content-container">
                                <!-- Predictive Analytics Section -->
                                <Panel headerText="Predictive Maintenance Analytics" 
                                       class="sapUiResponsiveMargin analytics-panel"
                                       backgroundDesign="Transparent">
                                    <content>
                                        <grid:CSSGrid class="analytics-grid">
                                            
                                            <!-- Time to Next Predicted Maintenance -->
                                            <Panel class="tnp-panel">
                                                <headerToolbar>
                                                    <Toolbar class="tnp-panel-header">
                                                        <core:Icon src="sap-icon://calendar" class="sapUiTinyMarginEnd"/>
                                                        <Title text="Time to Next Predicted Maintenance" level="H3" class="sapUiTinyMarginEnd"/>
                                                        <ToolbarSpacer/>
                                                        <Text text="Predictive maintenance analysis based on real-time sensor data"/>
                                                    </Toolbar>
                                                </headerToolbar>
                                                <content>
                                                    <VBox class="sapUiMediumMargin">
                                                        <!-- Legend -->
                                                        <HBox class="tnp-legend">
                                                            <HBox alignItems="Center" class="sapUiTinyMarginEnd">
                                                                <core:Icon src="sap-icon://circle-task-2" 
                                                                          class="legend-icon normal"/>
                                                                <Text text="Normal (&gt;7 days)" class="legend-text"/>
                                                            </HBox>
                                                            <HBox alignItems="Center">
                                                                <core:Icon src="sap-icon://circle-task-2" 
                                                                          class="legend-icon urgent"/>
                                                                <Text text="Urgent (≤7 days)" class="legend-text"/>
                                                            </HBox>
                                                        </HBox>
                                                        
                                                        <!-- TNP Chart Visualization -->
                                                        <VBox class="tnp-chart-container">
                                                            <HBox class="chart-bars-container">
                                                                <List items="{/TNPData}" 
                                                                      showNoData="false"
                                                                      class="chart-list">
                                                                    <CustomListItem class="chart-bar-wrapper">
                                                                        <VBox class="chart-bar {= ${daysUntilMaintenance} <= 7 ? 'urgent' : 'normal'}"
                                                                              style="height: {= Math.max(20, (${daysUntilMaintenance} / 30) * 200)}px;">
                                                                            <Text text="{tailNumber}" class="chart-bar-label"/>
                                                                            <Text text="{daysUntilMaintenance} days" class="chart-bar-value"/>
                                                                        </VBox>
                                                                    </CustomListItem>
                                                                </List>
                                                            </HBox>
                                                        </VBox>
                                                        
                                                        <!-- TNP Summary -->
                                                        <HBox justifyContent="SpaceBetween" class="tnp-summary">
                                                            <VBox>
                                                                <Text text="Aircraft Needing Immediate Attention" class="summary-label"/>
                                                                <Title text="{= ${/TNPData}.filter(function(item) { return item.isUrgent; }).length}" 
                                                                       level="H2" 
                                                                       class="summary-value urgent"/>
                                                            </VBox>
                                                            <VBox>
                                                                <Text text="Average Days Until Maintenance" class="summary-label"/>
                                                                <Title text="{= Math.round(${/TNPData}.reduce(function(sum, item) { return sum + item.daysUntilMaintenance; }, 0) / ${/TNPData}.length)}" 
                                                                       level="H2" 
                                                                       class="summary-value"/>
                                                            </VBox>
                                                        </HBox>
                                                    </VBox>
                                                </content>
                                            </Panel>
                                            
                                            <!-- MTBF Trends -->
                                            <Panel class="mtbf-panel">
                                                <headerToolbar>
                                                    <Toolbar class="mtbf-panel-header">
                                                        <core:Icon src="sap-icon://trend-down" class="sapUiTinyMarginEnd"/>
                                                        <Title text="MTBF Trends by Aircraft Type" level="H3" class="sapUiTinyMarginEnd"/>
                                                        <ToolbarSpacer/>
                                                        <Text text="Rolling 6-month MTBF average"/>
                                                    </Toolbar>
                                                </headerToolbar>
                                                <content>
                                                    <VBox class="sapUiMediumMargin">
                                                        <!-- MTBF Chart Visualization -->
                                                        <VBox class="mtbf-chart-container">
                                                            <VBox class="chart-line-container">
                                                                <List items="{/MTBFTrends}" 
                                                                      showNoData="false"
                                                                      class="mtbf-chart-list">
                                                                    <CustomListItem class="mtbf-line-item">
                                                                        <HBox justifyContent="SpaceBetween" alignItems="Center" class="mtbf-line">
                                                                            <VBox>
                                                                                <Text text="{model}" class="mtbf-model"/>
                                                                                <Text text="{period}" class="mtbf-period"/>
                                                                            </VBox>
                                                                            <HBox alignItems="Center">
                                                                                <VBox class="mtbf-bar {= ${mtbf} < 300 ? 'critical' : ${mtbf} < 500 ? 'warning' : 'success'}"
                                                                                      style="width: {= Math.max(20, (${mtbf} / 800) * 200)}px;">
                                                                                </VBox>
                                                                                <Text text="{mtbf} hrs" class="mtbf-value"/>
                                                                            </HBox>
                                                                        </HBox>
                                                                    </CustomListItem>
                                                                </List>
                                                            </VBox>
                                                        </VBox>
                                                        
                                                        <!-- MTBF Summary -->
                                                        <HBox justifyContent="SpaceBetween" class="mtbf-summary">
                                                            <VBox>
                                                                <Text text="Best Performing Model" class="summary-label"/>
                                                                <Title text="Boeing 787 (720 hrs)" level="H2" class="summary-value success"/>
                                                            </VBox>
                                                            <VBox>
                                                                <Text text="Needs Attention" class="summary-label"/>
                                                                <Title text="Airbus A330 (180 hrs)" level="H2" class="summary-value critical"/>
                                                            </VBox>
                                                        </HBox>
                                                        
                                                        <Text text="*Lower values indicate more frequent failures" 
                                                              class="chart-note"/>
                                                    </VBox>
                                                </content>
                                            </Panel>
                                        </grid:CSSGrid>
                                    </content>
                                </Panel>

                                <!-- Comprehensive Aircraft Data Table -->
                                <Panel headerText="Aircraft Fleet Data &amp; Predictive Maintenance" 
                                       class="sapUiResponsiveMargin table-panel"
                                       backgroundDesign="Transparent">
                                    <content>
                                        <table:Table id="aircraftTable" 
                                                    rows="{/Aircraft}"
                                                    selectionMode="MultiToggle"
                                                    enableSelectAll="true"
                                                    ariaLabelledBy="title"
                                                    visibleRowCount="12"
                                                    class="sapUiResponsiveContentPadding modern-table"
                                                    alternateRowColors="true">
                                            
                                            <table:columns>
                                                <!-- Tail Number -->
                                                <table:Column width="120px" sortProperty="tailNumber">
                                                    <Label text="Tail Number"/>
                                                    <table:template>
                                                        <Link text="{tailNumber}" 
                                                              class="aircraft-link"
                                                              press="onAircraftSelect"/>
                                                    </table:template>
                                                </table:Column>
                                                
                                                <!-- Aircraft Model -->
                                                <table:Column width="140px" sortProperty="model">
                                                    <Label text="Aircraft Model"/>
                                                    <table:template>
                                                        <Text text="{model}"/>
                                                    </table:template>
                                                </table:Column>
                                                
                                                <!-- Overall Status -->
                                                <table:Column width="100px" sortProperty="overallStatus">
                                                    <Label text="Status"/>
                                                    <table:template>
                                                        <ObjectStatus text="{overallStatus}" 
                                                                    state="{path: 'overallStatus', formatter: '.formatOverallStatusState'}"
                                                                    class="status-badge"/>
                                                    </table:template>
                                                </table:Column>
                                                
                                                <!-- Risk Score -->
                                                <table:Column width="100px" sortProperty="riskScore">
                                                    <Label text="Risk Score"/>
                                                    <table:template>
                                                        <ObjectNumber 
                                                            number="{path: 'riskScore', type: 'sap.ui.model.type.Float', formatOptions: {decimals: 1}}" 
                                                            state="{path: 'riskScore', formatter: '.formatRiskState'}"
                                                            class="risk-score"/>
                                                    </table:template>
                                                </table:Column>
                                                
                                                <!-- Flight Hours -->
                                                <table:Column width="120px" sortProperty="flightHoursSinceLastMaintenance">
                                                    <Label text="Flight Hours"/>
                                                    <table:template>
                                                        <ObjectNumber number="{flightHoursSinceLastMaintenance}" 
                                                                    class="flight-hours"/>
                                                    </table:template>
                                                </table:Column>
                                                
                                                <!-- Engine Temperature -->
                                                <table:Column width="120px" sortProperty="engineTemperature">
                                                    <Label text="Engine Temp (°F)"/>
                                                    <table:template>
                                                        <ObjectNumber 
                                                            number="{path: 'engineTemperature', type: 'sap.ui.model.type.Float', formatOptions: {decimals: 1}}" 
                                                            state="{path: 'engineTemperature', formatter: '.formatTempState'}"
                                                            class="engine-temp"/>
                                                    </table:template>
                                                </table:Column>
                                                
                                                <!-- Vibration Level -->
                                                <table:Column width="120px" sortProperty="vibrationLevel">
                                                    <Label text="Vibration (g)"/>
                                                    <table:template>
                                                        <ObjectNumber 
                                                            number="{path: 'vibrationLevel', type: 'sap.ui.model.type.Float', formatOptions: {decimals: 1}}" 
                                                            state="{path: 'vibrationLevel', formatter: '.formatVibrationState'}"
                                                            class="vibration-level"/>
                                                    </table:template>
                                                </table:Column>
                                                
                                                <!-- Brake Wear -->
                                                <table:Column width="120px" sortProperty="brakeWearPercent">
                                                    <Label text="Brake Wear (%)"/>
                                                    <table:template>
                                                        <ObjectNumber 
                                                            number="{path: 'brakeWearPercent', type: 'sap.ui.model.type.Float', formatOptions: {decimals: 1}}" 
                                                            state="{= ${brakeWearPercent} > 85 ? 'Error' : ${brakeWearPercent} > 70 ? 'Warning' : 'Success'}"
                                                            class="brake-wear"/>
                                                    </table:template>
                                                </table:Column>
                                                
                                                <!-- Oil Particle Count -->
                                                <table:Column width="120px" sortProperty="oilParticleCount">
                                                    <Label text="Oil Particles"/>
                                                    <table:template>
                                                        <ObjectNumber 
                                                            number="{oilParticleCount}" 
                                                            state="{= ${oilParticleCount} > 1000 ? 'Error' : ${oilParticleCount} > 800 ? 'Warning' : 'Success'}"
                                                            class="oil-particles"/>
                                                    </table:template>
                                                </table:Column>
                                                
                                                <!-- MTBF -->
                                                <table:Column width="100px" sortProperty="mtbf">
                                                    <Label text="MTBF (hrs)"/>
                                                    <table:template>
                                                        <ObjectNumber number="{mtbf}" class="mtbf-value"/>
                                                    </table:template>
                                                </table:Column>
                                                
                                                <!-- Aircraft Age -->
                                                <table:Column width="100px" sortProperty="aircraftAgeYears">
                                                    <Label text="Age (years)"/>
                                                    <table:template>
                                                        <Text text="{aircraftAgeYears}"/>
                                                    </table:template>
                                                </table:Column>
                                                
                                                <!-- Last Failure -->
                                                <table:Column width="140px" sortProperty="lastFailureType">
                                                    <Label text="Last Failure"/>
                                                    <table:template>
                                                        <VBox>
                                                            <Text text="{lastFailureType}" 
                                                                  class="{= ${lastFailureType} ? '' : 'sapUiTinyMarginBottom'}"/>
                                                            <Text text="{lastFailureDate}" 
                                                                  class="failure-date"/>
                                                        </VBox>
                                                    </table:template>
                                                </table:Column>
                                                
                                                <!-- Next Maintenance -->
                                                <table:Column width="150px" sortProperty="nextMaintenanceEstimate">
                                                    <Label text="Next Maintenance"/>
                                                    <table:template>
                                                        <Text text="{nextMaintenanceEstimate}"/>
                                                    </table:template>
                                                </table:Column>
                                                
                                                <!-- Maintenance Status -->
                                                <table:Column width="130px" sortProperty="maintenanceStatus">
                                                    <Label text="Maint. Status"/>
                                                    <table:template>
                                                        <ObjectStatus text="{maintenanceStatus}" 
                                                                    state="{path: 'maintenanceStatus', formatter: '.formatMaintenanceState'}"
                                                                    class="maintenance-status"/>
                                                    </table:template>
                                                </table:Column>
                                            </table:columns>
                                        </table:Table>
                                    </content>
                                </Panel>
                            </VBox>
                        </content>
                    </IconTabFilter>
                    
                    <!-- Analytics Tab -->
                    <IconTabFilter id="analyticsTab"
                                   key="analytics"
                                   text="Analytics"
                                   icon="sap-icon://bar-chart">
                        <content>
                            <VBox class="tab-content-container">
                                <Title text="Fleet Analytics Dashboard" level="H2" class="sapUiMediumMarginBottom"/>
                                <Text text="Comprehensive analytics and reporting functionality will be implemented here." 
                                      class="sapUiMediumMargin"/>
                            </VBox>
                        </content>
                    </IconTabFilter>
                    
                    <!-- Alerts Tab -->
                    <IconTabFilter id="alertsTab"
                                   key="alerts"
                                   text="Alerts"
                                   icon="sap-icon://alert">
                        <content>
                            <VBox class="tab-content-container">
                                <Title text="Alert Management" level="H2" class="sapUiMediumMarginBottom"/>
                                <Text text="System alerts and notification management will be implemented here." 
                                      class="sapUiMediumMargin"/>
                            </VBox>
                        </content>
                    </IconTabFilter>
                    
                    <!-- Compliance Tab -->
                    <IconTabFilter id="complianceTab"
                                   key="compliance"
                                   text="Compliance"
                                   icon="sap-icon://shield">
                        <content>
                            <VBox class="tab-content-container">
                                <Title text="Safety & Compliance" level="H2" class="sapUiMediumMarginBottom"/>
                                <Text text="Regulatory compliance and safety management will be implemented here." 
                                      class="sapUiMediumMargin"/>
                            </VBox>
                        </content>
                    </IconTabFilter>
                </items>
            </IconTabBar>
        </content>
        
        <!-- Modern Footer with Actions -->
        <footer>
            <Toolbar class="dashboard-footer">
                <ToolbarSpacer/>
                <Button text="Fleet Analytics" 
                        icon="sap-icon://bar-chart" 
                        press="onNavigateToAnalytics" 
                        class="sapUiTinyMarginEnd footer-button"/>
                <Button text="Safety Compliance" 
                        icon="sap-icon://shield" 
                        press="onNavigateToCompliance" 
                        class="sapUiTinyMarginEnd footer-button"/>
                <Button text="Import Data" 
                        icon="sap-icon://upload" 
                        press="onNavigateToImport" 
                        type="Emphasized"
                        class="footer-button"/>
            </Toolbar>
        </footer>
    </Page>
</mvc:View>